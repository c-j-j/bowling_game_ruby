module Bowling
  class Game
    def initialize
      @rolls = []
    end

    def roll(pins)
      @rolls << pins
    end

    def score
      total_score = 0
      (0..19).each do |i|
        if @rolls[i]+@rolls[i+1]==10
          total_score += 10 + @rolls[i+2]
        end
        total_score += @rolls[i]
      end
      total_score
    end
  end
end

describe Bowling::Game do
  let(:game){Bowling::Game.new}

  it 'scores a gutter game' do
    roll_many(20, 0)
    expect(game.score).to be(0)
  end

  it 'scores all ones' do
    roll_many(20, 1)
    expect(game.score).to be(20)
  end
  
  it 'scores a spare' do
    game.roll(5)
    game.roll(5)
    game.roll(3)
    roll_many(17,0)
    expect(game.score).to be(16)
  end

  def roll_many(number, pins)
    number.times do
      game.roll(pins)
    end
  end
end
